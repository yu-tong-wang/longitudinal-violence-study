"religion1", "religion2", "religion3", "religion4", "religion5",
"psystress1", "psystress2", "psystress3", "psystress4",
"psystress5", "psywell1", "psywell2", "psywell3", "psywell4",
"psywell5", "victfrnd1", "victfrnd2", "victfrnd3", "victfrnd4",
"drug1", "drug2", "drug3", "drug4", "drug5", "alcohol1",
"alcohol2", "alcohol3", "alcohol4", "alcohol5")
female_SCM <- female_final[, c("CODENUM", "cohort", SCM_nodes)]
write.table(female_SCM, "../data/female_SCM.csv")
save(female_SCM, file = "../data/female_SCM.RData")
setwd("~/Documents/GitHub/longitudinal_violence_study/eda")
table_relation <- rbind(table(female_SCM$relation1, useNA = "always"),
table(female_SCM$relation2, useNA = "always"),
table(female_SCM$relation3, useNA = "always"),
table(female_SCM$relation4, useNA = "always"),
table(female_SCM$relation5, useNA = "always"))
rownames(table_relation) <- paste0("yr", 1:5)
table_relation
table_religion <- rbind(table(female_SCM$religion1, useNA = "always"),
table(female_SCM$religion2, useNA = "always"),
table(female_SCM$religion3, useNA = "always"),
table(female_SCM$religion4, useNA = "always"),
table(female_SCM$religion5, useNA = "always"))
rownames(table_religion) <- paste0("yr", 1:5)
table_religion
table_victfrnd <- rbind(table(female_SCM$victfrnd1, useNA = "always"),
table(female_SCM$victfrnd2, useNA = "always"),
table(female_SCM$victfrnd3, useNA = "always"),
table(female_SCM$victfrnd4, useNA = "always"),
table(female_SCM$victfrnd5, useNA = "always"))
rownames(table_victfrnd) <- paste0("yr", 1:5)
table_victfrnd
table_drug <- rbind(table(female_SCM$drug1, useNA = "always"),
table(female_SCM$drug2, useNA = "always"),
table(female_SCM$drug3, useNA = "always"),
table(female_SCM$drug4, useNA = "always"),
table(female_SCM$drug5, useNA = "always"))
rownames(table_drug) <- paste0("yr", 1:5)
table_drug
table_alcohol <- rbind(table(female_SCM$alcohol1, useNA = "always"),
table(female_SCM$alcohol2, useNA = "always"),
table(female_SCM$alcohol3, useNA = "always"),
table(female_SCM$alcohol4, useNA = "always"),
table(female_SCM$alcohol5, useNA = "always"))
rownames(table_alcohol) <- paste0("yr", 1:5)
table_alcohol
table_relation
table_suicide <- rbind(table(female_SCM$suicide1, useNA = "always"),
table(female_SCM$suicide2, useNA = "always"),
table(female_SCM$suicide3, useNA = "always"),
table(female_SCM$suicide4, useNA = "always"),
table(female_SCM$suicide5, useNA = "always"))
rownames(table_suicide) <- paste0("yr", 1:5)
table_suicide
table_victim <- rbind(table(female_SCM$victim1, useNA = "always"),
table(female_SCM$victim2, useNA = "always"),
table(female_SCM$victim3, useNA = "always"),
table(female_SCM$victim4, useNA = "always"))
table_victim
rownames(table_victim) <- paste0("yr", 1:4)
table_victim
table(female_SCM$Y, useNA = "always")
nrow(female_SCM)
skimr:skim(female_SCM$psystress1)
skimr::skim(female_SCM$psystress1)
skimr::skim(as.numeric(female_SCM$psystress1))
dist(as.numeric(female_SCM$psystress1))
quantile(as.numeric(female_SCM$psystress1))
quantile(as.numeric(female_SCM$psystress1), na.rm = T)
quartile(as.numeric(female_SCM$psystress1), na.rm = T)
quartile(as.numeric(female_SCM$psystress1), 0.95, na.rm = T)
quantile(as.numeric(female_SCM$psystress1), 0.95, na.rm = T)
quantile(as.numeric(female_SCM$psystress2), 0.95, na.rm = T)
quantile(as.numeric(female_SCM$psystress3), 0.95, na.rm = T)
quantile(as.numeric(female_SCM$psystress4), 0.95, na.rm = T)
skimr::skim(female_SCM$psystress1)
skimr::skim(as.numeric(female_SCM$psystress1))
skimr::skim(as.numeric(female_SCM$psystress2))
quantile(as.numeric(female_SCM$psystress1), 0.975)
quantile(as.numeric(female_SCM$psystress1), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psystress1), 0.025, na.rm = T)
quantile(as.numeric(female_SCM$psystress1), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psystress1), 0.025, na.rm = T)
quantile(as.numeric(female_SCM$psystress1), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psystress1), 0.025, na.rm = T)
which(female_SCM$psystress1 > 3.9167 | female_SCM$psystress1 < 1.125)
length(which(female_SCM$psystress1 > 3.9167 | female_SCM$psystress1 < 1.125))
quantile(as.numeric(female_SCM$psystress2), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psystress2), 0.025, na.rm = T)
(as.numeric(female_SCM$psystress3), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psystress3), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psystress3), 0.025, na.rm = T)
quantile(as.numeric(female_SCM$psystress4), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psystress4), 0.025, na.rm = T)
quantile(as.numeric(female_SCM$psystress5), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psystress5), 0.025, na.rm = T)
which(female_SCM$psystress1 > 3.9167 | female_SCM$psystress1 < 1.125 | female_SCM$psystress2 > 3.9583 |
female_SCM$psystress2 < 1.125 | female_SCM$psystress3 > 3.778027 | female_SCM$psystress3 < 1.1778 |
female_SCM$psystress4 > 3.6222 | female_SCM$psystress4 < 1.165868 | female_SCM$psystress5 > 3.61725 |
female_SCM$psystress5 < 1.16559)
length(which(female_SCM$psystress1 > 3.9167 | female_SCM$psystress1 < 1.125 | female_SCM$psystress2 > 3.9583 |
female_SCM$psystress2 < 1.125 | female_SCM$psystress3 > 3.778027 | female_SCM$psystress3 < 1.1778 |
female_SCM$psystress4 > 3.6222 | female_SCM$psystress4 < 1.165868 | female_SCM$psystress5 > 3.61725 |
female_SCM$psystress5 < 1.16559))
skimr::skim(as.numeric(female_SCM$psystress1))
quantile(as.numeric(female_SCM$psystress2), 0.975, na.rm = T)
skimr::skim(as.numeric(female_SCM$psystress2))
skimr::skim(as.numeric(female_SCM$psystress3))
skimr::skim(as.numeric(female_SCM$psystress4))
skimr::skim(as.numeric(female_SCM$psystress5))
skimr::skim(as.numeric(female_SCM$psywell1))
skimr::skim(as.numeric(female_SCM$psywell2))
skimr::skim(as.numeric(female_SCM$psywell3))
skimr::skim(as.numeric(female_SCM$psywell4))
skimr::skim(as.numeric(female_SCM$psywell5))
skimr::skim(as.numeric(female_SCM$psywell5))
boxplot(as.numeric(female_SCM$psywell5))
boxplot(as.numeric(female_SCM$psywell4)) # 5: 1.5, 5
boxplot(as.numeric(female_SCM$psywell3)) # 5: 1.5, 5
boxplot(as.numeric(female_SCM$psywell2)) # 5: 1.5, 5
boxplot(as.numeric(female_SCM$psywell1)) # 5: 1.5, 5
which(female_SCM$psywell1 > 5 | female_SCM$psywell2 > 5 | female_SCM$psywell1 < 1.5 |
female_SCM$psywell2 < 1.5 | female_SCM$psywell3 > 5 | female_SCM$psywell3 < 1.5 |
female_SCM$psywell4 > 5 | female_SCM$psywell4 < 1.5 | female_SCM$psywell5 > 5 |
female_SCM$psywell5 < 1.5)
length(which(female_SCM$psywell1 > 5 | female_SCM$psywell2 > 5 | female_SCM$psywell1 < 1.5 |
female_SCM$psywell2 < 1.5 | female_SCM$psywell3 > 5 | female_SCM$psywell3 < 1.5 |
female_SCM$psywell4 > 5 | female_SCM$psywell4 < 1.5 | female_SCM$psywell5 > 5 |
female_SCM$psywell5 < 1.5))
range(as.numeric(female_SCM$psywell1))
range(as.numeric(female_SCM$psywell1), na.rm - T)
range(as.numeric(female_SCM$psywell1), na.rm = T)
length(which(female_SCM$psywell1 > 4.9 | female_SCM$psywell2 > 4.9 | female_SCM$psywell1 < 1.1 |
female_SCM$psywell2 < 1.1 | female_SCM$psywell3 > 4.9 | female_SCM$psywell3 < 1.1 |
female_SCM$psywell4 > 4.9 | female_SCM$psywell4 < 1.1 | female_SCM$psywell5 > 4.9 |
female_SCM$psywell5 < 1.1))
length(which(female_SCM$psywell1 > 4.9 & female_SCM$psywell2 > 4.9 &
female_SCM$psywell3 > 4.9 & female_SCM$psywell4 > 4.9 &
female_SCM$psywell5 > 4.9))
quantile(as.numeric(female_SCM$psywell1), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psywell2), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psywell3), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psywell4), 0.975, na.rm = T)
quantile(as.numeric(female_SCM$psywell4), 0.025, na.rm = T)
length(which(female_SCM$psywell1 > psywell1_high & female_SCM$psywell2 > psywell2_high &
female_SCM$psywell3 > psywell3_high & female_SCM$psywell4 > psywell3_high &
female_SCM$psywell5 > psywell5_high))
psywell1_high <- quantile(as.numeric(female_SCM$psywell1), 0.975, na.rm = T)
psywell2_high <- quantile(as.numeric(female_SCM$psywell2), 0.975, na.rm = T)
psywell3_high <- quantile(as.numeric(female_SCM$psywell3), 0.975, na.rm = T)
psywell4_high <- quantile(as.numeric(female_SCM$psywell4), 0.975, na.rm = T)
psywell5_high <- quantile(as.numeric(female_SCM$psywell5), 0.975, na.rm = T)
length(which(female_SCM$psywell1 > psywell1_high & female_SCM$psywell2 > psywell2_high &
female_SCM$psywell3 > psywell3_high & female_SCM$psywell4 > psywell3_high &
female_SCM$psywell5 > psywell5_high))
psywell1_high <- quantile(as.numeric(female_SCM$psywell1), 0.95, na.rm = T)
psywell2_high <- quantile(as.numeric(female_SCM$psywell2), 0.95, na.rm = T)
psywell3_high <- quantile(as.numeric(female_SCM$psywell3), 0.95, na.rm = T)
psywell4_high <- quantile(as.numeric(female_SCM$psywell4), 0.95, na.rm = T)
psywell5_high <- quantile(as.numeric(female_SCM$psywell5), 0.95, na.rm = T)
length(which(female_SCM$psywell1 > psywell1_high & female_SCM$psywell2 > psywell2_high &
female_SCM$psywell3 > psywell3_high & female_SCM$psywell4 > psywell3_high &
female_SCM$psywell5 > psywell5_high))
psywell1_high <- quantile(as.numeric(female_SCM$psywell1), 0.975, na.rm = T)
psywell2_high <- quantile(as.numeric(female_SCM$psywell2), 0.975, na.rm = T)
psywell3_high <- quantile(as.numeric(female_SCM$psywell3), 0.975, na.rm = T)
psywell4_high <- quantile(as.numeric(female_SCM$psywell4), 0.975, na.rm = T)
psywell5_high <- quantile(as.numeric(female_SCM$psywell5), 0.975, na.rm = T)
psywell1_low <- quantile(as.numeric(female_SCM$psywell1), 0.025, na.rm = T)
psywell2_low <- quantile(as.numeric(female_SCM$psywell2), 0.025, na.rm = T)
psywell3_low <- quantile(as.numeric(female_SCM$psywell3), 0.025, na.rm = T)
psywell4_low <- quantile(as.numeric(female_SCM$psywell4), 0.025, na.rm = T)
psywell5_low <- quantile(as.numeric(female_SCM$psywell5), 0.025, na.rm = T)
length(which(female_SCM$psywell1 > psywell1_high & female_SCM$psywell2 > psywell2_high &
female_SCM$psywell3 > psywell3_high & female_SCM$psywell4 > psywell3_high &
female_SCM$psywell5 > psywell5_high))
length(which(female_SCM$psywell1 < psywell1_low & female_SCM$psywell2 < psywell2_low &
female_SCM$psywell3 < psywell3_low & female_SCM$psywell4 < psywell3_low &
female_SCM$psywell5 < psywell5_low))
which(female_SCM$psywell1 < psywell1_low & female_SCM$psywell2 < psywell2_low &
female_SCM$psywell3 < psywell3_low & female_SCM$psywell4 < psywell3_low &
female_SCM$psywell5 < psywell5_low)
which(female_SCM$psywell1 > psywell1_high & female_SCM$psywell2 > psywell2_high &
female_SCM$psywell3 > psywell3_high & female_SCM$psywell4 > psywell3_high &
female_SCM$psywell5 > psywell5_high)
psystress1_high <- quantile(as.numeric(female_SCM$psystress1), 0.975, na.rm = T)
psystress2_high <- quantile(as.numeric(female_SCM$psystress2), 0.975, na.rm = T)
psystress3_high <- quantile(as.numeric(female_SCM$psystress3), 0.975, na.rm = T)
psystress4_high <- quantile(as.numeric(female_SCM$psystress4), 0.975, na.rm = T)
psystress5_high <- quantile(as.numeric(female_SCM$psystress5), 0.975, na.rm = T)
psystress1_low <- quantile(as.numeric(female_SCM$psystress1), 0.025, na.rm = T)
psystress2_low <- quantile(as.numeric(female_SCM$psystress2), 0.025, na.rm = T)
psystress3_low <- quantile(as.numeric(female_SCM$psystress3), 0.025, na.rm = T)
psystress4_low <- quantile(as.numeric(female_SCM$psystress4), 0.025, na.rm = T)
psystress5_low <- quantile(as.numeric(female_SCM$psystress5), 0.025, na.rm = T)
psystress_outlier1 <- which(female_SCM$psystress1 > psystress1_high & female_SCM$psystress2 > psystress2_high &
female_SCM$psystress3 > psystress3_high & female_SCM$psystress4 > psystress3_high &
female_SCM$psystress5 > psystress5_high)
psystress_outlier2 <- which(female_SCM$psystress1 <psystress1_low & female_SCM$psystress2 < psystress2_low &
female_SCM$psystress3 < psystress3_low & female_SCM$psystress4 < psystress3_low &
female_SCM$psystress5 < psystress5_low)
psystress_outlier1
psystress_outlier2
outliers <- c(psywell_outlier1, psywell_outlier2, psystress_outlier1, psystress_outlier2 )
psywell_outlier1 <- which(female_SCM$psywell1 > psywell1_high & female_SCM$psywell2 > psywell2_high &
female_SCM$psywell3 > psywell3_high & female_SCM$psywell4 > psywell3_high &
female_SCM$psywell5 > psywell5_high)
psywell_outlier2 <- which(female_SCM$psywell1 < psywell1_low & female_SCM$psywell2 < psywell2_low &
female_SCM$psywell3 < psywell3_low & female_SCM$psywell4 < psywell3_low &
female_SCM$psywell5 < psywell5_low)
outliers <- c(psywell_outlier1, psywell_outlier2, psystress_outlier1, psystress_outlier2 )
outliers
length(outliers)
length(outliers)
vic_1111 <- sum((female_SCM$victim1 == 1) & (female_SCM$victim2 == 1) &
(female_SCM$victim3 == 1) & (female_SCM$victim4 == 1),
na.rm = T)
vic_0000 <- sum((female_SCM$victim1 == 0) & (female_SCM$victim2 == 0) &
(female_SCM$victim3 == 0) & (female_SCM$victim4 == 0),
na.rm = T)
vic_1111
vic_0000
outliers <- c(psywell_outlier1, psywell_outlier2, psystress_outlier1, psystress_outlier2)
female_outlier <- female_SCM[-outliers, ]
outliers
female_outlier <- female_SCM[-outliers, ]
female_outliers <- female_SCM[-outliers, ]
vic_1111_o <- sum((female_outliers$victim1 == 1) & (female_outliers$victim2 == 1) &
(female_outliers$victim3 == 1) & (female_outliers$victim4 == 1),
na.rm = T)
vic_0000_o <- sum((female_outliers$victim1 == 0) & (female_outliers$victim2 == 0) &
(female_outliers$victim3 == 0) & (female_outliers$victim4 == 0),
na.rm = T)
vic_1111_o
vic_0000_o
table(female_outliers$Y, useNA = "always")
table_victim <- rbind(table(female_SCM$victim1, useNA = "always"),
table(female_SCM$victim2, useNA = "always"),
table(female_SCM$victim3, useNA = "always"),
table(female_SCM$victim4, useNA = "always"))
rownames(table_victim) <- paste0("yr", 1:4)
table_victim
table_relation <- rbind(table(female_SCM$relation1, useNA = "always"),
table(female_SCM$relation2, useNA = "always"),
table(female_SCM$relation3, useNA = "always"),
table(female_SCM$relation4, useNA = "always"),
table(female_SCM$relation5, useNA = "always"))
rownames(table_relation) <- paste0("yr", 1:5)
table_relation
table_religion <- rbind(table(female_SCM$religion1, useNA = "always"),
table(female_SCM$religion2, useNA = "always"),
table(female_SCM$religion3, useNA = "always"),
table(female_SCM$religion4, useNA = "always"),
table(female_SCM$religion5, useNA = "always"))
rownames(table_religion) <- paste0("yr", 1:5)
table_religion
table_victfrnd <- rbind(table(female_SCM$victfrnd1, useNA = "always"),
table(female_SCM$victfrnd2, useNA = "always"),
table(female_SCM$victfrnd3, useNA = "always"),
table(female_SCM$victfrnd4, useNA = "always"),
table(female_SCM$victfrnd5, useNA = "always"))
rownames(table_victfrnd) <- paste0("yr", 1:5)
table_victfrnd
female_final <- female_data %>%
# cohort
mutate(cohort = COHORT) %>%
# add treatment intervention A
mutate(victim1 = (COOCCURA != 1)) %>%
mutate(victim2 = (COOCCUR2 != 1)) %>%
mutate(victim3 = (COOCCUR3 != 1)) %>%
mutate(victim4 = (COOCCUR4 != 1)) %>%
# add suicidal L10:
mutate(suicide1 = (SUICIDE != 1)) %>% # 1 if suicidal, 0 if not
mutate(suicide2 = (SUICIDE2 != 1)) %>%
mutate(suicide3 = (SUICIDE3 != 1)) %>%
mutate(suicide4 = (SUICIDE4 != 1)) %>%
mutate(suicide5 = (SUICIDE5 != 1)) %>%
# add outcome Y
mutate(Y = as.numeric(suicide1) + as.numeric(suicide2) + as.numeric(suicide3) +
as.numeric(suicide4) + as.numeric(suicide5)) %>%
# race W_1:
mutate(race = RACE) %>%
# sexual orientation W_2:
mutate(sxorient = (SXORIENT != 1)) %>% # 1 if bisexual/homosexual/not sure, 0 if heterosexual
# consent sex (age 14 - present) W:_3
mutate(consent = CONSENT) %>%
# forced sex (age 14 - present) W_4:
mutate(forced = FSEX_AFT14) %>%
mutate(forced_att = FSEXATT_AFT14) %>%
# sexual experience before 14 W_5
mutate(sex_bef14 = SEX_BEF14) %>%
# relation status L_1
mutate(relation1 = (MARSTAT != 1)) %>% # 1 for in-relation or separated, 0 for single
mutate(relation2 = RELATION2) %>%
mutate(relation3 = (RELSTAT3 != 1)) %>%
mutate(relation4 = (RELSTAT4 != 1)) %>%
mutate(relation5 = (RELSTAT5 != 1)) %>%
# religious preference L_2
mutate(religion1 = (RELINFL != 1)) %>% # 1 if religion has at least some
#influence on the way the subject choose to spend their time each day
mutate(religion2 = (RELINFL2 != 1)) %>%
mutate(religion3 = (RELINFL3 != 1)) %>%
mutate(religion4 = (RELINFL4 != 1)) %>%
mutate(religion5 = (RELINFL5 != 1)) %>%
# negative psychological quality L_3
mutate(psystress1 = PSYSTRES) %>% # continuous
mutate(psystress2 = PSYSTRS2) %>%
mutate(psystress3 = PSYSTRS3) %>%
mutate(psystress4 = PSYSTRS4) %>%
mutate(psystress5 = PSYSTRS5) %>%
# positive psychological quality L_4
mutate(psywell1 = PSYWELL) %>% # continuous
mutate(psywell2 = PSYWELL2) %>%
mutate(psywell3 = PSYWELL3) %>%
mutate(psywell4 = PSYWELL4) %>%
mutate(psywell5 = PSYWELL5) %>%
# number of women the respondent know who had been sexually victimized L_5
# note YR 5 info is missing
mutate(victfrnd1 = (VICTFRND != 1)) %>% # 1 for at least one, 0 for none
mutate(victfrnd2 = (VCTFRND2 != 1)) %>%
mutate(victfrnd3 = (VCTFRND3 != 1)) %>%
mutate(victfrnd4 = (VCTFRND4 != 1)) %>%
mutate(victfrnd5 = (NUMVICT5 != 1)) %>%
# drug use of the respondent L_6
mutate(drug1 = DRUG1) %>% # 1 for drug use, 0 for none
mutate(drug2 = DRUG2) %>%
mutate(drug3 = DRUG3) %>%
mutate(drug4 = DRUG4) %>%
mutate(drug5 = DRUG5) %>%
# alcohol use of the respondent L_7
mutate(alcohol1 = (DRNKFREQ != 1)) %>% # 1 for alcohol use, 0 for none
mutate(alcohol2 = (DRNKFRQ2 != 1)) %>%
mutate(alcohol3 = (DRNKFRQ3 != 1)) %>%
mutate(alcohol4 = (DRNKFRQ4 != 1)) %>%
mutate(alcohol5 = (DRNKFRQ5 != 1))
# export CSV file
SCM_nodes <- c("victim1", "victim2", "victim3", "victim4", "suicide1",
"suicide2", "suicide3", "suicide4", "suicide5", "Y", "race",
"sxorient", "consent", "forced", "forced_att", "sex_bef14",
"relation1", "relation2", "relation3", "relation4", "relation5",
"religion1", "religion2", "religion3", "religion4", "religion5",
"psystress1", "psystress2", "psystress3", "psystress4",
"psystress5", "psywell1", "psywell2", "psywell3", "psywell4",
"psywell5", "victfrnd1", "victfrnd2", "victfrnd3", "victfrnd4",
"victfrnd5", "drug1", "drug2", "drug3", "drug4", "drug5",
"alcohol1", "alcohol2", "alcohol3", "alcohol4", "alcohol5")
female_SCM <- female_final[, c("CODENUM", "cohort", SCM_nodes)]
write.table(female_SCM, "../data/female_SCM.csv")
save(female_SCM, file = "../data/female_SCM.RData")
table_victfrnd <- rbind(table(female_SCM$victfrnd1, useNA = "always"),
table(female_SCM$victfrnd2, useNA = "always"),
table(female_SCM$victfrnd3, useNA = "always"),
table(female_SCM$victfrnd4, useNA = "always"),
table(female_SCM$victfrnd5, useNA = "always"))
rownames(table_victfrnd) <- paste0("yr", 1:5)
table_victfrnd
# Female data
female_data <- read_por("../data/03212-0001-Data.por")
# add cohort
female_data[grep(pattern = "^90-", female_data$CODENUM), "COHORT"] <- 90
female_data[grep(pattern = "^91-", female_data$CODENUM), "COHORT"] <- 91
# relation status
relation2_90 <- which((female_data$COHORT == 90) & (female_data$MARSTAT2 != 1))
relation2_91 <- which((female_data$COHORT == 91) & (female_data$RELSTAT2 != 1))
no_relation2_90 <- which((female_data$COHORT == 90) & (female_data$MARSTAT2 == 1))
no_relation2_91 <- which((female_data$COHORT == 91) & (female_data$RELSTAT2 == 1))
RELATION2 <- rep(NA, nrow(female_data))
RELATION2[c(relation2_90, relation2_91)] <- 1
RELATION2[c(no_relation2_90, no_relation2_91)] <- 0
female_data <- cbind(female_data, RELATION2)
# sexual experience from age 14 to the present
# intercourse occurred
no_forced_sex <- female_data$SEXACTS == 1 & female_data$FORCESI == 1 &
female_data$PRESSSP == 1 & female_data$FORCESP == 1 & female_data$AUTHSP == 1 &
female_data$PRESSSI == 1 & female_data$AUTHSI == 1 & female_data$DRUGSI == 1
forced_sex <- female_data$SEXACTS == 2 | female_data$FORCESI == 2 |
female_data$PRESSSP == 2 | female_data$FORCESP == 2 | female_data$AUTHSP == 2 |
female_data$PRESSSI == 2 | female_data$AUTHSI == 2 | female_data$DRUGSI == 2
FSEX_AFT14 <- rep(NA, nrow(female_data))
FSEX_AFT14[no_forced_sex] <- 0
FSEX_AFT14[forced_sex] <- 1
female_data <- cbind(female_data, FSEX_AFT14)
# intercourse didnt occur
no_forced_sex_attempt <- female_data$ATTEMPT == 1 & female_data$DRUGATT == 1
forced_sex_attempt <- female_data$ATTEMPT == 2 | female_data$DRUGATT == 2
FSEXATT_AFT14 <- rep(NA, nrow(female_data))
FSEXATT_AFT14[no_forced_sex_attempt] <- 0
FSEXATT_AFT14[forced_sex_attempt] <- 1
female_data <- cbind(female_data, FSEXATT_AFT14)
# sexual experience prior to age 14
sex_bef14 <- female_data$SHOORGAN != 1 | female_data$FONDLED != 1 |
female_data$ATTEMPSI != 1 | female_data$SI != 1
no_sex_bef14 <- female_data$SHOORGAN == 1 & female_data$FONDLED == 1 &
female_data$ATTEMPSI == 1 & female_data$SI == 1
SEX_BEF14 <- rep(NA, nrow(female_data))
SEX_BEF14[no_sex_bef14] <- 0
SEX_BEF14[sex_bef14] <- 1
female_data <- cbind(female_data, SEX_BEF14)
# drug use including marijuana or other drugs of the respondent
DRUG1 <- female_data$MJFREQ != 1 | female_data$OTHERRX != 1 # 1 for drug use, 0 for none
DRUG2 <- female_data$MJFREQ2 != 1 | female_data$OTHERRX2 != 1
DRUG3 <- female_data$MJFREQ3 != 1 | female_data$OTHERRX3 != 1
DRUG4 <- female_data$MJFREQ4 != 1 | female_data$OTHERRX4 != 1
DRUG5 <- female_data$MJFREQ5 != 1 | female_data$OTHERRX5 != 1
female_data <- cbind(female_data, DRUG1, DRUG2, DRUG3, DRUG4, DRUG5)
female_final <- female_data %>%
# cohort
mutate(cohort = COHORT) %>%
# add treatment intervention A
mutate(victim1 = (COOCCURA != 1)) %>%
mutate(victim2 = (COOCCUR2 != 1)) %>%
mutate(victim3 = (COOCCUR3 != 1)) %>%
mutate(victim4 = (COOCCUR4 != 1)) %>%
# add suicidal L10:
mutate(suicide1 = (SUICIDE != 1)) %>% # 1 if suicidal, 0 if not
mutate(suicide2 = (SUICIDE2 != 1)) %>%
mutate(suicide3 = (SUICIDE3 != 1)) %>%
mutate(suicide4 = (SUICIDE4 != 1)) %>%
mutate(suicide5 = (SUICIDE5 != 1)) %>%
# add outcome Y
mutate(Y = as.numeric(suicide1) + as.numeric(suicide2) + as.numeric(suicide3) +
as.numeric(suicide4) + as.numeric(suicide5)) %>%
# race W_1:
mutate(race = RACE) %>%
# sexual orientation W_2:
mutate(sxorient = (SXORIENT != 1)) %>% # 1 if bisexual/homosexual/not sure, 0 if heterosexual
# consent sex (age 14 - present) W:_3
mutate(consent = CONSENT) %>%
# forced sex (age 14 - present) W_4:
mutate(forced = FSEX_AFT14) %>%
mutate(forced_att = FSEXATT_AFT14) %>%
# sexual experience before 14 W_5
mutate(sex_bef14 = SEX_BEF14) %>%
# relation status L_1
mutate(relation1 = (MARSTAT != 1)) %>% # 1 for in-relation or separated, 0 for single
mutate(relation2 = RELATION2) %>%
mutate(relation3 = (RELSTAT3 != 1)) %>%
mutate(relation4 = (RELSTAT4 != 1)) %>%
mutate(relation5 = (RELSTAT5 != 1)) %>%
# religious preference L_2
mutate(religion1 = (RELINFL != 1)) %>% # 1 if religion has at least some
#influence on the way the subject choose to spend their time each day
mutate(religion2 = (RELINFL2 != 1)) %>%
mutate(religion3 = (RELINFL3 != 1)) %>%
mutate(religion4 = (RELINFL4 != 1)) %>%
mutate(religion5 = (RELINFL5 != 1)) %>%
# negative psychological quality L_3
mutate(psystress1 = PSYSTRES) %>% # continuous
mutate(psystress2 = PSYSTRS2) %>%
mutate(psystress3 = PSYSTRS3) %>%
mutate(psystress4 = PSYSTRS4) %>%
mutate(psystress5 = PSYSTRS5) %>%
# positive psychological quality L_4
mutate(psywell1 = PSYWELL) %>% # continuous
mutate(psywell2 = PSYWELL2) %>%
mutate(psywell3 = PSYWELL3) %>%
mutate(psywell4 = PSYWELL4) %>%
mutate(psywell5 = PSYWELL5) %>%
# number of women the respondent know who had been sexually victimized L_5
mutate(victfrnd1 = (VICTFRND != 1)) %>% # 1 for at least one, 0 for none
mutate(victfrnd2 = (VCTFRND2 != 1)) %>%
mutate(victfrnd3 = (VCTFRND3 != 1)) %>%
mutate(victfrnd4 = (VCTFRND4 != 1)) %>%
mutate(victfrnd5 = (NUMVICT5 != 1)) %>%
# drug use of the respondent L_6
mutate(drug1 = DRUG1) %>% # 1 for drug use, 0 for none
mutate(drug2 = DRUG2) %>%
mutate(drug3 = DRUG3) %>%
mutate(drug4 = DRUG4) %>%
mutate(drug5 = DRUG5) %>%
# alcohol use of the respondent L_7
mutate(alcohol1 = (DRNKFREQ != 1)) %>% # 1 for alcohol use, 0 for none
mutate(alcohol2 = (DRNKFRQ2 != 1)) %>%
mutate(alcohol3 = (DRNKFRQ3 != 1)) %>%
mutate(alcohol4 = (DRNKFRQ4 != 1)) %>%
mutate(alcohol5 = (DRNKFRQ5 != 1))
# export CSV file
SCM_nodes <- c("victim1", "victim2", "victim3", "victim4", "suicide1",
"suicide2", "suicide3", "suicide4", "suicide5", "Y", "race",
"sxorient", "consent", "forced", "forced_att", "sex_bef14",
"relation1", "relation2", "relation3", "relation4", "relation5",
"religion1", "religion2", "religion3", "religion4", "religion5",
"psystress1", "psystress2", "psystress3", "psystress4",
"psystress5", "psywell1", "psywell2", "psywell3", "psywell4",
"psywell5", "victfrnd1", "victfrnd2", "victfrnd3", "victfrnd4",
"victfrnd5", "drug1", "drug2", "drug3", "drug4", "drug5",
"alcohol1", "alcohol2", "alcohol3", "alcohol4", "alcohol5")
female_SCM <- female_final[, c("CODENUM", "cohort", SCM_nodes)]
write.table(female_SCM, "../data/female_SCM.csv")
save(female_SCM, file = "../data/female_SCM.RData")
write.table(female_SCM, "../data/female_SCM.csv")
save(female_SCM, file = "../data/female_SCM.RData")
table_drug <- rbind(table(female_SCM$drug1, useNA = "always"),
table(female_SCM$drug2, useNA = "always"),
table(female_SCM$drug3, useNA = "always"),
table(female_SCM$drug4, useNA = "always"),
table(female_SCM$drug5, useNA = "always"))
rownames(table_drug) <- paste0("yr", 1:5)
table_drug
table_alcohol <- rbind(table(female_SCM$alcohol1, useNA = "always"),
table(female_SCM$alcohol2, useNA = "always"),
table(female_SCM$alcohol3, useNA = "always"),
table(female_SCM$alcohol4, useNA = "always"),
table(female_SCM$alcohol5, useNA = "always"))
rownames(table_alcohol) <- paste0("yr", 1:5)
table_alcohol
table_suicide <- rbind(table(female_SCM$suicide1, useNA = "always"),
table(female_SCM$suicide2, useNA = "always"),
table(female_SCM$suicide3, useNA = "always"),
table(female_SCM$suicide4, useNA = "always"),
table(female_SCM$suicide5, useNA = "always"))
rownames(table_suicide) <- paste0("yr", 1:5)
table_suicide
